# 交易教练升级计划 (2026-02-24)

> 老大需求原话：把ITC指标尽可能多加入，回测板块，送用户几个免费策略，新闻版块每天更新，界面精细化，去AI感

---

## 📦 四大模块

### 模块1: ITC 指标仪表盘 `/dashboard`
**目标**: 独立页面，展示 ITC 核心指标，专业数据密度

**数据源**: ITC API (key在 `trading/config/.env`)
- [ ] BTC Risk (0-1)
- [ ] ETH Risk (0-1)
- [ ] Total Market Cap Risk
- [ ] Crypto Risk Indicator (综合)
- [ ] MVRV Z-Score
- [ ] Macro Recession Risk
- [ ] Total Market Cap vs Trendline
- [ ] 各指标历史走势图

**UI要求**:
- 仪表盘/gauge 展示当前值
- 颜色编码: 绿(低风险) → 黄(中性) → 红(高风险)
- 历史趋势小图 (sparkline)
- 暗色主题，TradingView风格

**技术方案**:
- API: 后端proxy或直接客户端调用（需评估CORS）
- 图表: recharts 或 lightweight-charts
- 数据缓存: localStorage + 定时刷新

---

### 模块2: 回测板块 `/backtest`
**目标**: 用户选策略+时间段，一键回测，看结果

**免费策略 (3个)**:
- [ ] EMA 双均线交叉 (9/21)
- [ ] RSI 超卖反弹 (RSI<30买入, >70卖出)
- [ ] 突破回踩 (前高突破+回踩确认)

**回测引擎**:
- [ ] 前端JS实现（不需要后端）
- [ ] 支持选择: 币种(BTC/ETH/SOL), 时间框架(1H/4H/1D), 回测周期(30/90/180天)
- [ ] 输出: 胜率, 盈亏比, 最大回撤, 总收益%, 资金曲线图
- [ ] 每笔交易可展开看详情

**数据源**: CoinGecko 历史K线 或 Binance API

**UI**:
- 左侧: 策略选择 + 参数调整
- 右侧: 回测结果 + 资金曲线
- 底部: 交易列表

---

### 模块3: 新闻版块 `/news`
**目标**: 每日更新，分类展示，与交易决策关联

**数据来源** (已有基础设施):
- [ ] 金色财经快讯 (web_fetch)
- [ ] 热点雷达报告 (reports/目录)
- [ ] Fear & Greed Index
- [ ] BTC ETF 流入流出

**分类**:
- 📊 市场数据 (价格/指标变动)
- 🏛️ 宏观政策 (美联储/关税/监管)
- 🔗 链上动态 (大户/ETF/DeFi)
- 🔥 热门话题 (社区讨论/KOL观点)

**更新方式**:
- 静态JSON文件，由cron每日生成
- 或: 客户端直接fetch API

**UI**:
- 卡片流布局
- 每条标注情绪标签 (🟢利好 🔴利空 ⚪中性)
- 时间线展示

---

### 模块4: 界面精细化 + 去AI感
**目标**: 专业交易平台感觉，不像AI产品

**去AI感**:
- [ ] "AI教练" → "交易助手" 或 "教练反馈"
- [ ] 评分机制保留但弱化机器感，用自然语言
- [ ] 反馈语气: "老手在旁边点拨" 而非 "AI打分"
- [ ] 去掉所有 "AI" "人工智能" 字样
- [ ] 不要 emoji 轰炸，克制使用

**UI精细化**:
- [ ] 全局暗色主题 (参考TradingView/Coinglass)
- [ ] 提高数据密度，减少空白
- [ ] 字体: 等宽数字字体 (数据展示)
- [ ] 专业配色: 涨绿跌红 (或涨红跌绿-中国习惯?)
- [ ] 响应式: 移动端优先
- [ ] 导航栏更新: 首页 | 交易 | 仪表盘 | 回测 | 新闻 | 课程 | 历史
- [ ] Loading states, 空状态, 错误处理都要有

---

## 🔧 技术决策

### 数据层
- ITC API: 需要proxy（API key不能暴露在前端）
  - 方案A: Next.js API routes（但当前是静态导出）
  - 方案B: 预生成JSON（cron定时更新）← 推荐，与现有架构一致
  - 方案C: 改为SSR部署
- K线数据: Binance公开API（无需key）
- 新闻: 预生成JSON

### 图表库
- lightweight-charts (TradingView开源版) — K线图
- recharts — 仪表盘/资金曲线

### 部署
- 保持静态导出 + 数据JSON文件
- 或升级到Vercel部署（支持API routes）

---

## 📅 执行顺序

### Phase 1: 基础升级 (今晚-明天)
1. 全局UI重构: 暗色主题 + 专业布局 + 去AI感
2. 导航栏更新
3. 新闻版块 (最快能做完，数据源已有)

### Phase 2: ITC仪表盘 (1-2天)
4. ITC API 数据层
5. 仪表盘页面 + 可视化

### Phase 3: 回测引擎 (2-3天)
6. 前端回测引擎
7. 3个免费策略实现
8. 回测结果可视化

### Phase 4: 打磨 (持续)
9. 移动端适配
10. 性能优化
11. 用户体验细节

---

## ⚠️ 待确认
- 涨跌颜色: 国际版(绿涨红跌) or 中国版(红涨绿跌)?
- 部署方式: 保持静态 or 升级Vercel?
- 目标用户语言: 中文为主?
